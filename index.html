<!DOCTYPE html>
<html>	
<head>
	<title>Global Terrorism Attacks </title>
    <link rel="shortcut icon" href="favicon.ico">
	<meta charset="utf-8" />
	<script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/own_style.css">
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <script src="easy-button.js"></script>
    <script src="Autolinker.min.js"></script>
	<script type="text/javascript" src="jamie.js"> </script>
</head>
<body>
	<div id ="container">
		<div id="header">
		<br><b><font color="white">Global Terrorism Attacks</font></b><br><br>
		</div>
	</div>
	<div class ='custom-popup' id="map">
	<script>

//@@@@@@@@@@@@@  Declaring Map & Baselayer


		var map = L.map('map').setView([41,-1],2);
		var CartoDB_All = L.tileLayer('http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png', {
			attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',
			subdomains: 'abcd',
			maxZoom: 19
		});
		CartoDB_All.addTo(map);	
		

		
//@@@@@@@@@@@@@ Layer Control

        var MyControl = L.Control.extend({
            options: {
                position: 'topright'
            },

            onAdd: function (map) {
                // create the control container with a particular class name
                var container = L.DomUtil.create('div', 'my-custom-control');

                // ... initialize other DOM elements, add listeners, etc.

                return container;
            }
        });

        map.addControl(new MyControl());

//@@@@@@@@@@@@@ Layer Symbology
		function doStyleAssault(feature) {
        if (feature.properties.armassault >= 0.0 &&
                feature.properties.armassault <= 100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 100.0 &&
                feature.properties.armassault <= 300.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 300.0 &&
                feature.properties.armassault <= 700.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 700.0 &&
                feature.properties.armassault <= 1000.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 1000.0 &&
                feature.properties.armassault <= 1500.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 1500.0 &&
                feature.properties.armassault <= 2200.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.armassault >= 2200.0 &&
                feature.properties.armassault <= 3018.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//armassault
        function doStyleAssassin(feature) {
        if (feature.properties.assassin >= 0.0 &&
                feature.properties.assassin <= 400.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 40.0 &&
                feature.properties.assassin <= 100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 100.0 &&
                feature.properties.assassin <= 300.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 300.0 &&
                feature.properties.assassin <= 400.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 400.0 &&
                feature.properties.assassin <= 700.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 700.0 &&
                feature.properties.assassin <= 1300.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.assassin >= 1300.0 &&
                feature.properties.assassin <= 1650.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//assassin
        function doStyleBombing(feature) {
        if (feature.properties.bombing >= 0.0 &&
                feature.properties.bombing <= 200.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 200.0 &&
                feature.properties.bombing <= 700.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 700.0 &&
                feature.properties.bombing <= 1500.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 1500.0 &&
                feature.properties.bombing <= 2100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 2100.0 &&
                feature.properties.bombing <= 3100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 3100.0 &&
                feature.properties.bombing <= 6200.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.bombing >= 6200.0 &&
                feature.properties.bombing <= 11434.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//bombing
        function doStyleFacility(feature) {
        if (feature.properties.facility >= 0.0 &&
                feature.properties.facility <= 25.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 25.0 &&
                feature.properties.facility <= 100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 100.0 &&
                feature.properties.facility <= 150.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 150.0 &&
                feature.properties.facility <= 250.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 250.0 &&
                feature.properties.facility <= 350.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 350.0 &&
                feature.properties.facility <= 600.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.facility >= 600.0 &&
                feature.properties.facility <= 800.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//facility
        function doStyleHijacking(feature) {
        if (feature.properties.hijacking >= 0.0 &&
                feature.properties.hijacking <= 0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 1 &&
                feature.properties.hijacking <= 2.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 2.0 &&
                feature.properties.hijacking <= 5.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 5.0 &&
                feature.properties.hijacking <= 9.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 9.0 &&
                feature.properties.hijacking <= 13.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 13.0 &&
                feature.properties.hijacking <= 23.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hijacking >= 23.0 &&
                feature.properties.hijacking <= 34.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//hijacking
        function doStyleHostage(feature) {
        if (feature.properties.hostage >= 0.0 &&
                feature.properties.hostage <= 1.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 1.0 &&
                feature.properties.hostage <= 5.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 5.0 &&
                feature.properties.hostage <= 10.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 10.0 &&
                feature.properties.hostage <= 20.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 20.0 &&
                feature.properties.hostage <= 40.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 40.0 &&
                feature.properties.hostage <= 90.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.hostage >= 90.0 &&
                feature.properties.hostage <= 120.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//hostage
        function doStyleUnarmed(feature) {
        if (feature.properties.unarmed >= 0.0 &&
                feature.properties.unarmed <= 1.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 1.0 &&
                feature.properties.unarmed <= 4.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 4.0 &&
                feature.properties.unarmed <= 7.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 7.0 &&
                feature.properties.unarmed <= 14.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 14 &&
                feature.properties.unarmed <= 28.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 28.0 &&
                feature.properties.unarmed <= 56.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unarmed >= 56 &&
                feature.properties.unarmed <= 74.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//unarmed
        function doStyleUnknown(feature) {
        if (feature.properties.unknown >= 0.0 &&
                feature.properties.unknown <= 10.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 10.0 &&
                feature.properties.unknown <= 30.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 30.0 &&
                feature.properties.unknown <= 50.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 50.0 &&
                feature.properties.unknown <= 100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 100.0 &&
                feature.properties.unknown <= 160.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 160.0 &&
                feature.properties.unknown <= 270.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.unknown >= 270.0 &&
                feature.properties.unknown <= 430.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//unknown
        function doStyleGrandtotal(feature) {
        if (feature.properties.grandtotal >= 0.0 &&
                feature.properties.grandtotal <= 400.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#2b83ba',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 400.0 &&
                feature.properties.grandtotal <= 1200.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#80bfab',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 1200.0 &&
                feature.properties.grandtotal <= 2400.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#c7e8ad',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 2400.0 &&
                feature.properties.grandtotal <= 3200.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#ffffbf',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 3200.0 &&
                feature.properties.grandtotal <= 6100.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#fdc980',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 6100.0 &&
                feature.properties.grandtotal <= 11500.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#f07c4a',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        if (feature.properties.grandtotal >= 11400.0 &&
                feature.properties.grandtotal <= 16025.0) {

            return {
                color: '#000000',
                weight: '1.04',
                dashArray: '',
                fillColor: '#d7191c',
                opacity: '0.6',
                fillOpacity: '0.6',
            }
        }
        }//grandtotal


//@@@@@@@@@@@@@ Declaring Overlays and Style

        var armassaultlayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleAssault

        });
        var assassinlayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleAssassin

        });
        var bombinglayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleBombing

        });
        var facilitylayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleFacility

        });
        var hijackinglayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleHijacking

        });
        var hostagelayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleHostage

        });
        var unknownlayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleUnknown

        });
        var unarmedlayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleUnarmed

        });
        var Grandtotallayer = new L.geoJson(jamie,{
            onEachFeature: basementDweller,
            style: doStyleGrandtotal

        });        

//@@@@@@@@@ Legends @@@@@@@@@@@@

        var ArmedAssaultL = L.control({position: 'bottomright'});
        var AssassinL = L.control({position: 'bottomright'});
        var BombingL = L.control({position: 'bottomright'});
        var FacilityL = L.control({position: 'bottomright'});
        var HijackingL = L.control({position: 'bottomright'});
        var HostageL = L.control({position: 'bottomright'});
        var UnarmedL = L.control({position: 'bottomright'});
        var UnknownL = L.control({position: 'bottomright'});
        var TotalL = L.control({position: 'bottomright'});




        ArmedAssaultL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/clXKF2O.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
            return div;
        };

        ArmedAssaultL.addTo(map);
        

        AssassinL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/0CmidSo.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        BombingL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/0zOtyRt.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        FacilityL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/KA1cD1B.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        HijackingL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/MuY3zQ8.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };

        HostageL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/X2lIKMR.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        UnarmedL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/c1lj6ht.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        UnknownL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/KTOIs4S.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };


        TotalL.onAdd = function(map) {
        var div = L.DomUtil.create('div', 'info legend');
            div.innerHTML += "<iframe src='"+ "http://i.imgur.com/KTOIs4S.jpg" +"' width='180' height='187' frameborder='0'></iframe>"
        return div;
        };





//@@@@@@@@@@@@@ Overlay Control 

        var overlays = {
            "Armed Assault": armassaultlayer,
            "Assasination": assassinlayer,
            "Bombing": bombinglayer,
            "Facility Attack": facilitylayer,
            "Hostage Situation": hostagelayer,
            "Hijacking": hijackinglayer,
            "Unknown Type": unknownlayer,
            "Unarmed": unarmedlayer,
            "Total Attacks": Grandtotallayer

        }

        L.control.layers(overlays,null,{collapsed:false}).addTo(map);

//@@@@@@@@@@@@@  Legend Control

    map.on('overlayadd', function (eventLayer) {
    if (eventLayer.name === 'bombinglayer') {
        BombingL.addTo(map);
        map.removeControl(ArmedAssaultL);
    } else {
        map.removeControl(ArmedAssaultL);
    }
    });


//@@@@@@@@@@@@@  Popups


        function basementDweller(feature, layer) {                  
            var popupContent = '<table><tr><th scope="row">Country:</th><td>' + Autolinker.link(String(feature.properties['admin'])) + '</td></tr><tr><th scope="row">Armed Assault</th><td>' + Autolinker.link(String(feature.properties['armassault'])) + '</td></tr><tr><th scope="row">Assasination</th><td>' + Autolinker.link(String(feature.properties['assassin'])) + '</td></tr><tr><th scope="row">Bomb Attack</th><td>' + Autolinker.link(String(feature.properties['bombing'])) + '</td></tr><tr><th scope="row">Facility Attack</th><td>' + Autolinker.link(String(feature.properties['facility'])) + '</td></tr><tr><th scope="row">Hijacking</th><td>' + Autolinker.link(String(feature.properties['hijacking'])) + '</td></tr><tr><th scope="row">Hostage</th><td>' + Autolinker.link(String(feature.properties['hostage'])) + '</td></tr><tr><th scope="row">Unarmed</th><td>' + Autolinker.link(String(feature.properties['unarmed'])) + '</td></tr><tr><th scope="row">Unknown</th><td>' + Autolinker.link(String(feature.properties['unknown'])) + '</td></tr><tr><th scope="row">Total Attacks</th><td>' + Autolinker.link(String(feature.properties['grandtotal'])) + '</td></tr></table>';
            layer.bindPopup(popupContent);
        }





//@@@@@@@@@@@@@ Pan out button


        L.easyButton( '<span class="vArr">&Updownarrow;</span>', function(){
            map.setView([41, -1], 2);
        }).addTo(map);
	</script>
	</div>
</body>


</html>